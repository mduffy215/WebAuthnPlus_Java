/*
 * (c) Copyright 2023 ~ Trust Nexus, Inc.
 * All technologies described here in are "Patent Pending". 
 * License information:  http://www.trustnexus.io/license.htm
 * 
 * AS LONG AS THIS NOTICE IS MAINTAINED THE LICENSE PERMITS REDISTRIBUTION OR RE-POSTING  
 * OF THIS SOURCE CODE TO A PUBLIC REPOSITORY (WITH OR WITHOUT MODIFICATIONS)! 
 * 
 * Report License Violations:  trustnexus.io@austin.rr.com 
 * 
 * This is a beta version:  0.0.1
 * Suggestions for code improvements:  trustnexus.io@austin.rr.com
 */

package io.trustnexus.util;

import java.io.OutputStreamWriter;
import java.net.HttpURLConnection;
import java.net.URL;

import javax.json.Json;
import javax.json.JsonObject;

public class TestFcm {
	
	public final static String AUTH_KEY_FCM = "AAAAu9F1IZc:APA91bH0zlBUton6sDCXFJwTWuw87NIDgQ1398mp53U_tq250qpFltcZbPl4yaGpM2ubTF2jqSMoIxXGTkQ5m12CXJPz_cnAm_pdkG0kAzXwlgBm80kz0C8w-njMtDWuJfnq7W6Phphu";
	public final static String API_URL_FCM = "https://fcm.googleapis.com/fcm/send";

	public TestFcm() {
	}

	public static void main(String[] args) {
	   
	  try {
			String userDeviceIdKey = "fIMUfbY_A_0:APA91bFoJ44zf8qHE6mDfCs6uLFNRygGp_0DHLTQ41HbO7dAL2mu35oe9iQSwn5oQ535n4oDRNF1pm-wIwwpdvKts9j0CbKl24-FU9P_H6XvNpKRPbQrmm4CaKz7VOkc3fRYTAnBqFxB";

			 URL url = new URL(API_URL_FCM);
			 HttpURLConnection conn = (HttpURLConnection) url.openConnection();

			 conn.setUseCaches(false);
			 conn.setDoInput(true);
			 conn.setDoOutput(true);

			 conn.setRequestMethod("POST");
			 conn.setRequestProperty("Authorization","key=" + AUTH_KEY_FCM);
			 conn.setRequestProperty("Content-Type","application/json");
			 
			 JsonObject info = Json.createObjectBuilder()
			 .add("title", "Trust Nexus Notification") 
			 .add("body", "Create new credential request.")  //"Authentication request." 
			 .add("sound", "mySound").build(); 
			 
			 JsonObject data = Json.createObjectBuilder()
			 .add("transferKeyEncryptedHex", "56387D47E14F0AED85043877455EDDA7F971FEDD61A1AD923FDD8B3744AF8D67C336897ED3464E6D2E29E2C77536D86A29595D14526C574EACA066AB174F0494DEC98D92DE834CEB3BD1DB6BA814855D65B958017570320506F0841A4EE99F752D2D0BAC140E0F3B523DE433DB38DBBA06F044DD0B9B7A66F8F8F968D57AFB3ED08A6E52538AA552BD5BF94321AE2A191CBF18A2BEA731E6B353F1516B47314C9C8D1F7CA286000865428ED110F7CA169048B5F620F3CA7EEEB9FB2C3416D9156BA4A89C794062DA14E826B1EF7CDC1C6C5229DF0AA005A0B404773E7602E8F624F557B2485E38202CFF5A42CDF5553C9CAE0FD1219B5181FCD45827AC7FC52170687D8379B64568EC54B618E3EB68FB909F078D1B0A4C4D1DA4B22E74573412D69722AC98D2A1DBAE82044F2D26C4E56BEA6375BB85F3C434842A40226F201E70803481919D512B861A6C9BED53DB5265AB2D6A39242A5D53BBBB82776EA206CD9CFB8FCB5313CBEA7E5EC06FBD849D741529B32CF3F156C32EC9C0BBF5CF2550855FA3D127458D0292FC6520A6531B2D24191043E9FC9FD8F2D4AE6F6D37A06A5CF6883C0123DCE7F5E20CE773B331E519B9AE4D7764D5EB1A0BEF15F9127FF7691FFDE1E9E3740446648E38EB36468C80D21C000995F340007FA54B6EF5879A8A54DD55DBFD645710F58595F8D475588305863A816A04BCA0D2930A1BC7E4")
			 .add("transferDataEncryptedHex", "3029BE02CECE042BCCA04A8DE7605B689FE5F6592D229749B26EDD1C32929294F1900B91C8F7D452D77BBE8A12628F97F1597EC69CABE844CB61B53CE3CB7898E7088BED983BE9D3D8CD9B2604CAB3ADD5F0F890A8BAD5C6D3C1B1484478CCE28D0C3F9909EEC9C9F8EDC49248EF180A8E66D7BBC0850F8FF4F8D0A194D95830C98D0F7D03C54F3BAAD0CC3311FB2A7A6565163A13085EEEBFB4F6BE00C49BF6428BF1C4C59E26085D31F96A84E3B5B932372AEF53C51FFCBB1A4A450C8F8AFCC15B1D122583773BA3D8E3639C7BBCBF4B45A2756A6DF95CA90698E03D69ABFBDDF15FD976D294CEC3DABC34FE16B37727C252A2F07FAF13424DEE0CAFA1DB39FF6333C7DB374E719EA30BB27D785B16EB2B1A9E6B9B6CA6744AFB6C3874D047E98C6C745CE42705F36D42400F287DB4B5BEC7239E63772ACD2A107B0136CD2F35AF1D44546AE3088C4D65F423A9536E6699D77EA8CA5C0BF61816A94EF589BAE83F0901D22277E9B77C6C18FE243C5F6F93B8ADE2C8DA00BC81088A20EEDBDF3F723A5735D358482A15B89053B8DAD26A28F11CB99A7CDD0F427D31F69FF177E2D2371B6A5682D38A9C6DB395E8CB543C7958A8A8762D8A8A6408C73FCDE50CAEB65324A58EA6C6969E5ECF76F33DD8D57DE86BABC41EB5E51579422F395BCCE6C0FC168AAEC97280245D8D1B1816A3CCB99EF1C8C1340E6908CEB204DB2BEFC947A3395A703CAE162B70E7CA0FD00F493047B0B4B3B5762AF391EFC5F5038795D8B5C68C8A5153F2EA3A41FA7059C97EEA6B7977E1E8F434F483205E459568C544C59879509401C87E96871A139455A813E1EB6211CD1363F18A7E75C10B5EF7127DFA07F00D7E2FFCCE491BB3E54A07FA4707378535AB8F335900329F632F3FDBC61AF8C85FCEC6A866BDA51586893F59C4EFEEAAA31BE263CF537B3F97E9AEC74E091FF69ECDE8BBAAE24B78D26BBEA5F06EB5D00892B2436F8B34BBC215282DD175C8023445D741B21D7105E5D506D962B31181566AB539E2A7C6D0579AFD344559BBF86D7E33E702687FB4B757AEAD03CD8140B37A69872E650FC9BBFCB0D25D0E71D789C70B72D61D8B042D35142E95EEF01D703DE6422A7114A0DCE8F95199EFEE9A9D4EFA5B1748F511CD0C9692BDD9BCF88414F5469EFB3D868A710B099BED4F480FC6E372D451F16869F1949CF68D164C919EBD2D35E950BDC867C4C9837D91E496C41715004A6A3CA1A379AE6DD1B0A85AC804AEE445F80D5F5190D880F351ED5D525695A1DC36183C3C31BA3D4F3D9FBFF7F3E33A178A9AC14431D647C86E1D00F0738B9A40B6D051C3BBBF64BEF77A4DD5F1DCE655C7FC42451DCE7DDE0EB7B62E8156BBEA8168D7579CCAE60E04EDD53F11757E4318E0AD2DB3CFDFB19C1D6E7075C751DE9ADF1E48B14C574EBBB883518101CE92BA171D7DB8357F20ACDBA8F5BACFC89A3AC1FB5922CE5C79622DC4288BDA08BE1F8704322470ADB3A356235A7424E6B4C98D3C8B9852787F23BFC2E02BB573D0DCE90E55B7A8222C66C5E90B4DC8337E42E792C0AAF4AD600CFD2D43A524B2C383B5B8DF48BF5033D59AFFEE95A649959CEF23499E40CE9953C8710F5F7F113E2BD002383A3B51DC448E144BC921AC9248453D2C37ECD4A27559F611EBF6410DFD6A00B0")
			 .add("transferDataEncryptedHashedHex", "875E7194DD7BD5163876686C1C202EB89731C34836B87081B204CC4D1173A183")
			 .build(); 

			 JsonObject json =  Json.createObjectBuilder()
			 .add("to",userDeviceIdKey.trim())
       .add("notification", info)
       .add("data", data).build();

			 OutputStreamWriter wr = new OutputStreamWriter(conn.getOutputStream());
			 wr.write(json.toString());
			 wr.flush();
			 conn.getInputStream();
		} catch (Exception e) {
			throw new RuntimeException(e);
		}
	}
}







